{{- $.Scratch.Set "siteTitle" .Title }}

{{- $section := .Params.assetSection }}
{{- if eq $section "package" }}
    {{- $.Scratch.Set "assetSection" "godoc.org" }}
{{- else if eq $section "packageList" }}
    {{- $.Scratch.Set "assetSection" "godoc.org" }}
{{- else if ne $section "" }}
    {{- $.Scratch.Set "assetSection" $section }}
{{- else }}
    {{- $.Scratch.Set "assetSection" "godoc.org" }}
{{- end }}


{{- partial "piece/header" . }}
    <nav class="navbar navbar-default" role="navigation">
        <div class="container">
            <div class="navbar-header">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a class="navbar-brand" href="//godoc.org/">
                    <strong>GoDoc</strong>
                </a>
            </div>
            <div class="collapse navbar-collapse">
                <ul class="nav navbar-nav">
                    <li>
                        <a href="//godoc.org/">Home</a>
                    </li>
                    <li>
                        <a href="//godoc.org/-/about">About</a>
                    </li>
                </ul>
                <form class="navbar-nav navbar-form navbar-right" id="x-search" action="//godoc.org/" role="search">
                    <input class="form-control" id="x-search-query" type="text" name="q" placeholder="Search">
                </form>
            </div>
        </div>
    </nav>

    {{- if eq $section "package" }}
        {{ $pkgName := .Params.godoc_pkg_name }}
        {{ $originPath := (add "/" (substr (.Permalink | relURL) 7 -1)) }}

        <div class="container">
            {{ .Content }}

            <div id="x-pkginfo">
                <p>
                    Package {{ $pkgName }} imports <a href="{{ $originPath }}?imports">{{ .Params.godoc_pkgInfo_importNPkg }} packages</a>
                    (<a href="{{ $originPath }}?import-graph">graph</a>)
                    and is imported by
                    <a href="{{ $originPath }}?importers">{{ .Params.godoc_pkgInfo_importedNPkg }} packages</a>
                    .
                    Updated
                    <span class="timeago" title="{{ .Params.godoc_pkgInfo_stamp }}">{{ dateFormat "2006-01-02" .Params.godoc_pkgInfo_stamp }}</span>
                    .
                    <a href="{{ $originPath }}?tools">Tools</a>
                    for package owners.
                </p>
            </div>

            <div id="x-jump" tabindex="-1" class="modal">
                <div class="modal-dialog">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h4 class="modal-title">Jump to identifier</h4>
                            <br class="clearfix">
                            <input id="x-jump-filter" class="form-control" autocomplete="off" type="text">
                        </div>
                        <div id="x-jump-body" class="modal-body" style="height: 260px; overflow: auto;">
                            <div id="x-jump-list" class="list-group" style="margin-bottom: 0;"></div>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn" data-dismiss="modal">Close</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    {{- else if eq $section "packageList" }}
        <div class="container">
            {{ .Content }}

            <div id="x-pkginfo">
                <p>
                    Updated
                    <span class="timeago" title="{{ .Params.godoc_pkgInfo_stamp }}">{{ dateFormat "2006-01-02" .Params.godoc_pkgInfo_stamp }}</span>
                </p>
            </div>
        </div>
    {{- else }}
        {{ .Content }}
    {{- end }}

    <div id="x-footer" class="clearfix">
        <div class="container">
            <a href="https://github.com/golang/gddo/issues">Website Issues</a>
            <span class="text-muted">|</span>
            <a href="https://golang.org/">Go Language</a>
            <span class="pull-right">
                <a href="#">Back to top</a>
            </span>
        </div>
    </div>
    {{- if or (eq $section "package") (eq $section "packageList") }}
        <div id="x-shortcuts" tabindex="-1" class="modal">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                        <h4 class="modal-title">Keyboard shortcuts</h4>
                    </div>
                    <div class="modal-body">
                        <table>
                            <tr>
                                <td align="right">
                                    <b>?</b>
                                </td>
                                <td>: This menu</td>
                            </tr>
                            <tr>
                                <td align="right">
                                    <b>/</b>
                                </td>
                                <td>: Search site</td>
                            </tr>
                            <tr>
                                <td align="right">
                                    <b>f</b>
                                </td>
                                <td>: Jump to identifier</td>
                            </tr>
                            <tr>
                                <td align="right">
                                    <b>g</b>
                                    then <b>g</b>
                                </td>
                                <td>: Go to top of page</td>
                            </tr>
                            <tr>
                                <td align="right">
                                    <b>g</b>
                                    then <b>b</b>
                                </td>
                                <td>: Go to end of page</td>
                            </tr>
                            <tr>
                                <td align="right">
                                    <b>g</b>
                                    then <b>i</b>
                                </td>
                                <td>: Go to index</td>
                            </tr>
                            <tr>
                                <td align="right">
                                    <b>g</b>
                                    then <b>e</b>
                                </td>
                                <td>: Go to examples</td>
                            </tr>
                        </table>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn" data-dismiss="modal">Close</button>
                    </div>
                </div>
            </div>
        </div>
    {{- end }}
{{ partial "piece/footer" . -}}

